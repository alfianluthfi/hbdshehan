/* =====================
   VIDEO YOUTUBE ID
===================== */
const youtubeVideoId = "8paS7HsItj67re_3A6l0Uw"; // GANTI ID YOUTUBE KAMU


/* =====================
   DATA HALAMAN FOTO
===================== */
const pages = [
    { img: "sts1.jpg", text: "Selamat bertambah usia orang favoritku, semoga hal baik selalu menyertaimu ya sayang" },
    { img: "sts2.jpg", text: "Mungkin belum banyak cerita yang disampaikan ke aku, tapi sejauh ini gada rasa sedikitpun aku untuk ga bangga sama sayang" },
    { img: "sts3.jpg", text: "Entah seberat apapun beban di pundakmu dan entah seberisik apapun dikepalamu, semoga tuhan mampukan dan mudahkan ya sayang" },
    { img: "sts4.jpg", text: "Maaf ya setiap diajak makan, diajak jalan jalan selalu sederhana"},
    { img: "sts5.jpg", text: "Ini apalagii, cape ya pegel yaa kalau diajak motoran maaf yaa" },
    { img: "sts6.jpg", text: "Foto favorit aku bersama sayangku dan shanumm" },
    { img: "sts7.jpg", text: "Senang sekali rasanya di kehidupan yang hanya sekali ini bisa berkesempatan bertemu dengan orang selucu inii" },
    { img: "sts8.jpg", text: "Kalo kata Ustadz Adi Hidayat, selagi Allah masih memberiku cinta untuk mencintainya, maka selama itu aku akan menyukainya"},
    { img: "sts9.jpg", text: "Sengaja mb ecanya ga diilangin, sejauh ini inilah orang yang disengaja maupun tidak disengaja bisa sedeket ini sama sayang"},
    { img: "sts10.jpg", text: "Cantik banget yaa bunganyaa, jumlah mawarnya penuh filosif. Sukak bangett pokoknyaaa"},
    { img: "sts11.jpg", text: "Happy Birthday yaa sayangyaa akuu, semestanya akuuu. Ily in every universe"},
    { img: "sts12.jpg", text: "Fokus yaa, soalnya abis ini bakal ada long text puaanjangg bangettt. Semoga berkenan untuk dibaca dan ga kelewat sekata pun" }
];

/* =====================
   DATA TEKS SAJA
===================== */
const textOnlyPages = [
    "Sayangku, semangat ya semoga hari ini sayang di diberkahi apapun itu, di kelilingi hal-hal baik. semoga, hidup selalu di lancarkan ya sayang. i know you're trying your best, even on days when you feel like you're not enough. tapi percaya deh, kamu cukup. kamu selalu cukup. dunia ini emang ga selalu ramah, tapi kamu selalu punya tempat untuk kembali entah itu dalam doa, dalam ingatan, atau dalam hati seseorang yang beneran peduli sama sayang. i hope today brings you a little peace, even if it's small. i'm proud of you, really.  udah sejauh ini, dan itu keren banget. mungkin sayang ga nyadar, tapi kehadiran sayang aja udah cukup buat bikin dunia jadi sedikit lebih hangat. dan kalau nanti hari mulai terasa berat lagi, sayang boleh istirahat sebentar. ga harus terus kuat kok, ga harus pura-pura baik-baik aja. it's okay to feel tired, to cry, to pause. yang penting jangan berhenti. hidup itu bukan tentang siapa yang paling cepat sampai, tapi siapa yang tetap mau jalan meskipun pelan. jangan biarin dunia yang keras ini ngubah jadi oranglain. karena kamu, dengan segala cara sayang bertahan, udah luar biasa banget. and maybe someday, when everything feels lighter, you'll look back and smile. realizing that all those little steps you took, all those quiet nights you survived, were the things that brought you here. so, keep going, okay? the world still needs your light. reminder.",
    "Sayang aku tau kalo lagi banyak pikiran, aku bisa ngerasain dari cara sayang bales, dari cara sayang diem dan dari caranya sayang pura pura keliatan baik baik aja padahal aku tau banget sebenarnya sayang lagi baik,aku ngerti kok kalo gamau cerita atau belum siap cerita aku cuma sayang tau kalo sayang ga harus ngadepin semuanya sendirian, kamu tuh punya aku,dan aku ada di sini bukan cuma buat nemenin kamu pas seneng aja tapi juga buat peluk sagang pas dunia lagi nyakitin sayang, jangan merasa sendiri ya semestaku.",
    "Sayaangkuu makasiihh yaa udah bikin semuaa ini berwarnaaa, makaasihh juga udah sayang sama shanumm walaupun gegara ontyy shehan sekarang apa apa onty shehan jadinyaaa. Tapii aku sukakk, shanum aja juga udah sesayangg ituu. Besok kapan kapan kalau emang Allah punyaa rencana aku ajak shanum main ke rumah sayang ya. Jangan tanya om nyaa kenapa shanum se hafal ituu, om nya aja jugaa herannn. Makasih yaa sayang",
    "Akuu jugaa mintaa maaff yaa kalau selama ini gabisa ngertiin sayang, ngambekan, gampang bete. Maaf ya sampe sayang juga bilang baru kali ini nemuin cowo kek gini, semenjak sayang ngomong gitu sekarang lebih banyak diem aja kalo sayang lagi ga seperti biasanya, aku orangnya mau berubah kok jadi pelan pelan ya, gabisa secepat itu.",
    "Sayaanngg, baru kali ini aku gabisa marah lama lama sama cewe, gabiss bete lama lama sama cewe. Aku selalu suka dicariin kalo lagi ketiduran, aku juga suka dibujuk btw hehe. Aku selalu bilang, jika kamu menyukai langit kamu harus menerima segala bentuk cuacanya baik itu panas, mendung, cerah, hujan, badai, pelangi. Aku sukaa semuaanyaa dari sayang marahnya, betenyaa, ngeseleinnnyaa, sedihnyaa, happynyaa. Semua itu cukup ke aku aja ya. Sayang aku gatau ya gimana besok tuhan mempertemukan kita ini pada ending ceritanya, selalu ambil hal baik dari setiap pertemuan ya. Kalau memang bukan aku ending dari cerita itu, setidaknya aku pernah hadir dan sedikit mengobati luka itu. Jangan pernah merasa ga enakan sama aku ya, aku gamau seperti ini gegara rasa ga enakan itu. Jangan ngerasa sendiri ya, jika dunia ga berpihak padamu ada aku yang selalu mengusahakan agar semua baik baik aja. Semoga hal baik selalu membersamai mu ya sayang. Jangan pernah merasa ga cukup sama dunia ini yaa, sayang punyak banyak orang yang bener bener sayang sama kamu, besok kalau udah bener bener di amanahkan jadi jaksa jadilah jaksa yang amanah ya, istiqomah, sebesar apapun godaan didepan sana selalu ingettt. Kejarlah akhirat insyaallah dunia akan mengikuti mu. Makasih yaa udah mau hadir di pertemuan yang tidak sengaja ini,  gausa jauh jauh liat orang didepan sana coba sesekali liat orang disebelahmu ini, nikmati aja momennya.Sekali lagi, selamat ulang tahun ya. Semoga berkenan yaa, emang ga seberapa kadonya tapi bener bener ikhlas kok.",
    "Akuu gatau ini udah keberapa kali aku ngomong sayang bangettt, makasii yaa udah mau menceritakan banyak sekali cerita, sayang juga harus berterima kasih dengan diri sendiri karena udah bertahan sampe sekarang dengan segala trauma yang pernah terjadi, maaff yaa kadang kalo sayang cerita banyak responku cuma kek gitu doangg, hidup lebih lama lagi yaa, hidup dengan penuh suka cita ya sayangku."
];

/* =====================
   VARIABEL
===================== */
let index = 0;
let textOnlyIndex = 0;

const cover = document.getElementById("cover");
const photo = document.getElementById("photo");
const caption = document.getElementById("caption");
const textOnly = document.getElementById("textOnly");
const textOnlyContent = document.getElementById("textOnlyContent");
const btn = document.getElementById("nextBtn");
const page = document.querySelector(".page");
const music = document.getElementById("music");
const choice = document.getElementById("choice");
const restartBtn = document.getElementById("restartBtn");
const finishBtn = document.getElementById("finishBtn");

const videoBox = document.getElementById("videoBox");
const youtubeFrame = document.getElementById("youtubeFrame");


/* =====================
   EVENT NEXT
===================== */
btn.addEventListener("click", () => {

    // klik pertama
    if (index === 0 && textOnlyIndex === 0) {
        music.play();
        startConfetti();
        cover.classList.add("hidden");
    }

    // animasi flip
    page.classList.remove("flip");
    void page.offsetWidth;
    page.classList.add("flip");

    // reset tampilan
    photo.classList.add("hidden");
    caption.classList.add("hidden");
    textOnly.classList.add("hidden");
    videoBox.classList.add("hidden");

    /* =====================
       FOTO 1â€“10
    ===================== */
    if (index < pages.length) {
        photo.src = pages[index].img;
        caption.innerHTML = pages[index].text;

        photo.classList.remove("hidden");
        caption.classList.remove("hidden");

        index++;
        return;
    }

    /* =====================
       TEKS SAJA
    ===================== */
    if (textOnlyIndex < textOnlyPages.length) {
        textOnlyContent.innerHTML = textOnlyPages[textOnlyIndex];
        textOnly.classList.remove("hidden");

        textOnlyIndex++;
        return;
    }

    /* =====================
       VIDEO YOUTUBE + PILIHAN
    ===================== */
    videoBox.classList.remove("hidden");

    youtubeFrame.src =
        `https://www.youtube.com/embed/TgkALfQbSO0?si=kYiAJmMJHT7D5X4B`;

    caption.innerHTML = "Shehan Talsya Syavira â¤ï¸";
    caption.classList.remove("hidden");

    btn.style.display = "none";
    choice.classList.remove("hidden");
});


/* =====================
   MULAI LAGI
===================== */
restartBtn.addEventListener("click", () => {
    index = 0;
    textOnlyIndex = 0;

    cover.classList.remove("hidden");
    photo.classList.add("hidden");
    caption.classList.add("hidden");
    textOnly.classList.add("hidden");
    videoBox.classList.add("hidden");

    youtubeFrame.src = "";

    btn.style.display = "inline-block";
    choice.classList.add("hidden");
});


/* =====================
   SELESAI
===================== */
finishBtn.addEventListener("click", () => {
    caption.innerHTML = "Terima kasih sudah membaca kisah cinta ini ðŸ’–";
    caption.classList.remove("hidden");
    choice.classList.add("hidden");
});


/* =====================
   CONFETTI HATI
===================== */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let hearts = [];
let running = false;

function startConfetti() {
    if (running) return;
    running = true;

    for (let i = 0; i < 120; i++) {
        hearts.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            size: Math.random() * 12 + 8,
            speed: Math.random() * 1.5 + 0.8,
            sway: Math.random() * 2 - 1,
            color: `hsl(${330 + Math.random() * 20},100%,70%)`
        });
    }
    animateHearts();
}

function drawHeart(x, y, size, color) {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.bezierCurveTo(x - size, y - size, x - size * 2, y + size / 2, x, y + size * 1.5);
    ctx.bezierCurveTo(x + size * 2, y + size / 2, x + size, y - size, x, y);
    ctx.fill();
}

function animateHearts() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    hearts.forEach(h => {
        drawHeart(h.x, h.y, h.size, h.color);
        h.y += h.speed;
        h.x += h.sway;
        if (h.y > canvas.height) {
            h.y = -20;
            h.x = Math.random() * canvas.width;
        }
    });
    requestAnimationFrame(animateHearts);

}
